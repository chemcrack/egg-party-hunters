import{d as w,r as a,h as f,o as h,c as d,e as t,t as n,b as v,_ as y}from"./index-Bv8EmkSt.js";const P={class:"gravity-demo"},b={key:0,class:"permission-tip"},E={key:1,class:"gravity-data"},g=w({__name:"test",setup(O){const m=a(0),r=a(0),o=a(0),i=a(!1),c=a("未知"),u=a(!0),s=e=>{e.alpha===null||e.beta===null||e.gamma===null||(m.value=e.alpha,r.value=e.beta,o.value=e.gamma,p())},p=()=>{const e=Math.abs(o.value);u.value=e<45,u.value?c.value=r.value>0?"竖屏（正）":"竖屏（倒）":c.value=o.value>0?"横屏（右）":"横屏（左）"},_=async()=>{try{DeviceOrientationEvent.requestPermission?await DeviceOrientationEvent.requestPermission()==="granted"?(i.value=!0,window.addEventListener("deviceorientation",s)):alert("拒绝权限将无法获取设备重力方向"):(i.value=!0,window.addEventListener("deviceorientation",s))}catch(e){console.error("请求权限失败：",e),alert("获取重力方向失败，请检查浏览器权限设置")}};return f(()=>{window.location.protocol!=="https:"&&window.location.hostname!=="localhost"&&console.warn("DeviceOrientation API 在非HTTPS环境下可能受限"),DeviceOrientationEvent.requestPermission||(i.value=!0,window.addEventListener("deviceorientation",s))}),h(()=>{window.removeEventListener("deviceorientation",s)}),(e,l)=>(v(),d("div",P,[l[1]||(l[1]=t("h3",null,"设备重力方向（屏幕锁定时仍有效）",-1)),i.value?(v(),d("div",E,[t("p",null,"α (绕Z轴): "+n(m.value.toFixed(1))+"°",1),t("p",null,"β (绕X轴): "+n(r.value.toFixed(1))+"°",1),t("p",null,"γ (绕Y轴): "+n(o.value.toFixed(1))+"°",1),t("p",null,"物理方向："+n(c.value),1),t("p",null,"是否竖屏（物理）："+n(u.value?"是":"否"),1)])):(v(),d("div",b,[l[0]||(l[0]=t("p",null,"需要您授权设备方向权限才能获取重力数据",-1)),t("button",{onClick:_},"点击授权")]))]))}}),D=y(g,[["__scopeId","data-v-77ab521c"]]);export{D as default};
